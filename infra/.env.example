# ─────────────────────────────────────────────────────────────────────────────
# VibeSpeak — Environment Variables
# Copy to .env and fill in every value marked REQUIRED before deploying.
# ─────────────────────────────────────────────────────────────────────────────

# ── Database ──────────────────────────────────────────────────────────────────
POSTGRES_USER=vibespeak
POSTGRES_PASSWORD=REQUIRED_change_me         # REQUIRED — use a strong password (32+ chars)
POSTGRES_DB=vibespeak
POSTGRES_HOST=postgres                        # Container name in docker-compose
POSTGRES_PORT=5432

# ── Redis ─────────────────────────────────────────────────────────────────────
REDIS_URL=redis://redis:6379                  # Container name in docker-compose

# ── JWT Authentication ────────────────────────────────────────────────────────
# Generate with:  node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=REQUIRED_change_me                 # REQUIRED — must be at least 64 chars
JWT_EXPIRES_IN=7d                             # Token expiration time

# ── Admin Token (first-time setup) ────────────────────────────────────────────
# Generate with:  node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ADMIN_TOKEN=REQUIRED_change_me                # REQUIRED for initial admin setup

# ── CORS ──────────────────────────────────────────────────────────────────────
# Set to your domain in production, e.g. https://vibespeak.example.com
# Use * only during initial testing (comma-separated for multiple)
ALLOWED_ORIGINS=*

# ── WebRTC / TURN ─────────────────────────────────────────────────────────────
# Your VPS public IP address
COTURN_EXTERNAL_IP=REQUIRED_your_public_ip    # REQUIRED
# Usually the same as external; override only if behind double-NAT
COTURN_RELAY_IP=
# Shared secret for TURN time-limited credentials
# Generate with:  openssl rand -hex 32
COTURN_SECRET=REQUIRED_change_me              # REQUIRED

# ── File Uploads ──────────────────────────────────────────────────────────────
# Maximum file size in bytes (default: 50MB)
MAX_FILE_SIZE=52428800
# Allowed file extensions (comma-separated)
ALLOWED_EXTENSIONS=jpg,jpeg,png,gif,webp,pdf,txt,md,zip,mp3,wav,ogg,mp4,webm
# Upload directory (inside container)
UPLOAD_DIR=/app/uploads

# ── Rate Limiting ─────────────────────────────────────────────────────────────
# Time window in milliseconds
RATE_LIMIT_WINDOW=60000
# Maximum requests per window per IP
RATE_LIMIT_MAX=100

# ── Voice Relay ───────────────────────────────────────────────────────────────
VOICE_PORT=9988
# Encryption key for voice packets
# Generate with:  openssl rand -hex 32
VOICE_ENCRYPTION_KEY=REQUIRED_change_me       # REQUIRED

# ── Logging ───────────────────────────────────────────────────────────────────
LOG_LEVEL=info                                # debug, info, warn, error
LOG_FORMAT=json                               # json or pretty

# ── Server Ports ──────────────────────────────────────────────────────────────
PORT=3001                                     # HTTP API port
WS_PORT=3002                                  # WebSocket signaling port

# ── Optional: External Services ───────────────────────────────────────────────
# S3-compatible storage (optional, for file uploads)
# S3_ENDPOINT=https://s3.amazonaws.com
# S3_ACCESS_KEY=your_access_key
# S3_SECRET_KEY=your_secret_key
# S3_BUCKET=vibespeak-uploads
# S3_REGION=us-east-1

# Sentry error tracking (optional)
# SENTRY_DSN=https://xxx@sentry.io/xxx

# ── Development Only ──────────────────────────────────────────────────────────
# Set to 'development' for local dev
NODE_ENV=production